<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.whalegoods.mapper.GoodsAdsTopMapper">

  <resultMap id="BaseResultMap" type="com.whalegoods.entity.response.ResGoodsAdsTop">
    <result column="goods_code" jdbcType="VARCHAR" property="goodsCode" />
    <result column="big_pic_url" jdbcType="VARCHAR" property="bigPicUrl" />
    <result column="tiny_pic_url" jdbcType="VARCHAR" property="tinyPicUrl" />
    <result column="action_type" jdbcType="TINYINT" property="actionType" />
  </resultMap>
  
    <select id="selectAdsTopList" parameterType="java.util.Map" resultMap="BaseResultMap">
  SELECT 
  c.goods_code,
  a.big_pic_url,
  a.tiny_pic_url,
  a.action_type
  FROM goods_ads_top a LEFT JOIN device_road b ON a.device_road_id =b.id 
  INNER JOIN device c ON  c.id=a.device_id
    WHERE c.device_id_jp=#{deviceIdJp} AND c.device_id_supp=#{deviceIdSupp}
  </select>

   <insert id="insert" parameterType="com.whalegoods.entity.GoodsAdsTop">
    INSERT INTO goods_ads_top (
    id,
    device_road_id, 
    device_id,
    action_type,
    big_pic_url,
    tiny_pic_url, 
    create_by,
    create_date,
    update_by,
    update_date)
    VALUES (
    #{id},
    #{deviceRoadId}, 
    #{deviceId}, 
    #{actionType},
    #{bigPicUrl},
    #{tinyPicUrl},
    #{createBy}, 
    now(),
    #{updateBy},
    now()
    )
  </insert>

</mapper>